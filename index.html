<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ° C9 1íšŒì°¨ ë‚­í”Œë‹¨</title>

<style>
body {
    background: #FFF7F1;
    font-family: "Pretendard", system-ui, sans-serif;
    display: flex;
    justify-content: center;
    padding: 40px 16px;
    color: #5b3b3b;
}

.wrap {
    width: 100%;
    max-width: 900px;
    transition: transform 0.2s ease;
}

/* --- ëª¨ë°”ì¼ ì „ìš© ì¶•ì†Œ --- */
@media (max-width: 600px) {
    .wrap {
        transform: scale(0.78);
        transform-origin: top center;
    }
}

/* ì œëª© */
h1 {
    text-align: center;
    margin-bottom: 16px;
    color: #FF9DB5;
    font-weight: 800;
    font-size: 20px;
}

/* í…Œì´ë¸” ë˜í¼ */
.table {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* í–‰ (ë‘¥ê·¼ ì¹´ë“œí˜•) */
.row {
    display: grid;
    grid-template-columns: 1.1fr 1.2fr 1fr 1fr 1.4fr 1fr 1.2fr auto;
    background: white;
    border-radius: 14px;
    overflow: clip;
}

/* ì…€ */
.cell {
    padding: 8px 6px;
    font-size: 14px;
    border-right: 1px solid #ffd9eb;
    border-bottom: 1px solid #ffd9eb;
    text-align: center;
    outline: none;
    contenteditable: plaintext-only;
    white-space: nowrap;
}

/* í´ë¦­ í¬ì»¤ìŠ¤ í™œì„±í™” */
.cell:focus {
    background: #ffe6f6;
}

/* ë§ˆì§€ë§‰ ì…€ í…Œë‘ë¦¬ ì œê±° */
.cell:last-child { border-right: none; }

/* í—¤ë” */
.header .cell {
    background: #FFE9F3;
    color: #D05B87;
    font-weight: 700;
    border-bottom: 2px solid #f5bad2;
    contenteditable: false;
}

/* --- í–‰ ì¡°ì‘ ë²„íŠ¼ --- */
.actions {
    display: flex;
    gap: 6px;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: 0.2s;
}

.actions button {
    border: none;
    background: #ffbcd9;
    padding: 4px 6px;
    border-radius: 6px;
    font-size: 12px;
    color: #6e3c52;
}

/* í–‰ í´ë¦­ ì‹œë§Œ ë²„íŠ¼ ë³´ì´ê¸° */
.row.active .actions {
    opacity: 1;
    pointer-events: auto;
}

/* ìƒ‰ìƒ íŒ”ë ˆíŠ¸ */
:root {
    --lv0: #FFFFFF;
    --lv1: #FFF6FB;
    --lv2: #FFEFF7;
    --lv3: #FFE6F3;
    --lv4: #FFDEEF;
    --lv5: #FFD5EB;
    --lv6: #FFCDE6;
    --lv7: #FFC5E2;
    --lv8: #FFBCD9;
    --lv9: #FFB2D0;
}
</style>
</head>

<body>
<div class="wrap">

<h1>ğŸ° C9 1íšŒì°¨ ë‚­í”Œë‹¨</h1>

<div class="table" id="table">

    <!-- í—¤ë” -->
    <div class="row header">
        <div class="cell">ì•„ì´ë””</div>
        <div class="cell">ë‹‰ë„¤ì„</div>
        <div class="cell">ê°¯ìˆ˜</div>
        <div class="cell">ì›í”Œì›</div>
        <div class="cell">ê³µì•½</div>
        <div class="cell">ì—­íŒ¬</div>
        <div class="cell">ë¹„ê³ </div>
        <div></div>
    </div>

    <!-- ìƒ˜í”Œ í–‰ -->
    <div class="row data">
        <div class="cell">danggun</div>
        <div class="cell">ë‹¹êµ°</div>
        <div class="cell amount">30000</div>
        <div class="cell">1</div>
        <div class="cell">ì¶œì„</div>
        <div class="cell ygp"></div>
        <div class="cell">VIP</div>

        <div class="actions">
            <button class="add">ï¼‹</button>
            <button class="del">ğŸ—‘</button>
        </div>
    </div>

</div>

</div>

<script>
const table = document.getElementById("table");

/* --- ìë™ ê³„ì‚° & ìƒ‰ìƒ ì ìš© --- */
function updateRow(row){
    const a = row.querySelector(".amount");
    const y = row.querySelector(".ygp");
    if(!a || !y) return;

    const num = parseInt(a.innerText.replace(/[^0-9]/g,'')) || 0;
    y.innerText = num > 0 ? Math.round(num * 0.03) : "";

    let lv="--lv0";
    if(num >= 100 && num <= 298) lv="--lv1";
    else if(num <= 999) lv="--lv2";
    else if(num <= 2999) lv="--lv3";
    else if(num <= 4999) lv="--lv4";
    else if(num <= 9999) lv="--lv5";
    else if(num <= 49999) lv="--lv6";
    else if(num <= 99999) lv="--lv7";
    else if(num <= 299999) lv="--lv8";
    else if(num >= 300000) lv="--lv9";

    row.style.background = `var(${lv})`;
}

/* ì „ì²´ ì ìš© */
function refresh(){ document.querySelectorAll(".row.data").forEach(updateRow);}
refresh();

/* --- í´ë¦­ ì‹œ í™œì„±í–‰ ì„¤ì • --- */
table.addEventListener("click", e=>{
    const cell = e.target.closest(".cell");
    if(cell){
        cell.focus(); // ê°•ì œ í¬ì»¤ìŠ¤
    }

    const row = e.target.closest(".row.data");
    if(!row) return;
    document.querySelectorAll(".row.data").forEach(r=>r.classList.remove("active"));
    row.classList.add("active");
});

/* --- ì…ë ¥ ì´ë²¤íŠ¸ --- */
table.addEventListener("input", e=>{
    const row = e.target.closest(".row.data");
    if(row) updateRow(row);
});

/* --- í–‰ ì¶”ê°€ --- */
table.addEventListener("click", e=>{
    if(!e.target.classList.contains("add")) return;
    const base = e.target.closest(".row.data");

    const newRow = base.cloneNode(true);
    newRow.querySelectorAll(".cell").forEach(c=>{
        if(!c.classList.contains("amount") && !c.classList.contains("ygp")){
            c.innerText="";
        }
    });

    base.insertAdjacentElement("afterend", newRow);
    refresh();
});

/* --- í–‰ ì‚­ì œ --- */
table.addEventListener("click", e=>{
    if(!e.target.classList.contains("del")) return;
    const row = e.target.closest(".row.data");
    row.remove();
});
</script>

</body>
</html>
