<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ° C9 1íšŒì°¨ ë‚­í”Œë‹¨</title>

<style>
/* ===== ì „ì²´ ë°°ê²½ / ê¸°ë³¸ í°íŠ¸ ===== */
body {
    background: #FFF6FA;
    font-family: "Pretendard", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
    display: flex;
    justify-content: center;
    padding: 20px 16px;
    color: #4c2d3b;
    margin: 0;
}

/* ===== íƒ€ì´í‹€ ì˜ì—­ ì»¨í…Œì´ë„ˆ ===== */
.wrap {
    width: 100%;
    max-width: 900px;
    margin: 0 auto;
}

/* ===== ì œëª© ===== */
h1 {
    text-align: center;
    font-size: 22px;
    font-weight: 800;
    margin-bottom: 20px;
    color: #FF8FB2;
}

/* ===== ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì˜ì—­ (Aí˜•: ê°€ë¡œ ìŠ¤í¬ë¡¤ í—ˆìš©) ===== */
.table-scroll {
    overflow-x: auto;           /* ê°€ë¡œë¡œ ë„˜ì¹˜ë©´ ìŠ¤í¬ë¡¤ */
    padding-bottom: 4px;
}

/* ===== í…Œì´ë¸”(í–‰ ë¬¶ìŒ) ===== */
.table {
    display: flex;
    flex-direction: column;
    gap: 10px;                  /* í–‰ ì‚¬ì´ ì—¬ë°± */
    min-width: 650px;           /* ë„ˆë¬´ ì°Œê·¸ëŸ¬ì§€ì§€ ì•Šê²Œ ìµœì†Œí­ë§Œ */
}

/* ===== í–‰ (ì¹´ë“œí˜•) ===== */
.row {
    display: grid;
    grid-template-columns:
        minmax(90px, auto)  /* ì•„ì´ë”” */
        minmax(90px, auto)  /* ë‹‰ë„¤ì„ */
        minmax(70px, auto)  /* ê°¯ìˆ˜ */
        minmax(70px, auto)  /* ì›í”Œì› */
        minmax(80px, auto)  /* ê³µì•½ */
        minmax(70px, auto)  /* ì—­íŒ¬ */
        minmax(80px, auto); /* ë¹„ê³  */

    background: white;
    border-radius: 26px;
    padding: 4px 0;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(255,150,180,0.10);
}

/* ===== ì…€ ===== */
.cell {
    padding: 8px 10px;
    font-size: 14px;

    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;

    white-space: nowrap;        /* í•œ ì¤„ ìœ ì§€ */
    border-right: 1px solid #FFE1EF;
    outline: none;
    cursor: text;
}

.cell:last-child {
    border-right: none;
}

/* ===== í—¤ë” ===== */
.header {
    background: #FFE8F4;
}

.header .cell {
    font-weight: 700;
    color: #D55382;
    border-bottom: 2px solid #F5BAD2;
    contenteditable: false;
    cursor: default;
}

/* ===== ìƒ‰ìƒ íŒ”ë ˆíŠ¸ (ê°¯ìˆ˜ êµ¬ê°„ë³„ í–‰ ë°°ê²½) ===== */
:root {
    --lv0: #FFFFFF;  /* 0~99 */
    --lv1: #FFF6FB;  /* 100~298 */
    --lv2: #FFEFF7;  /* 299~999 */
    --lv3: #FFE6F3;  /* 1000~2999 */
    --lv4: #FFDEEF;  /* 3000~4999 */
    --lv5: #FFD5EB;  /* 5000~9999 */
    --lv6: #FFCDE6;  /* 10000~49999 */
    --lv7: #FFC5E2;  /* 50000~99999 */
    --lv8: #FFBCD9;  /* 100000~299999 */
    --lv9: #FFB2D0;  /* 300000~ */
}

/* ëª¨ë°”ì¼ì—ì„œ ì‚´ì§ ì¶•ì†Œ (ìº¡ì³ìš© ë¹„ìœ¨) */
@media (max-width: 600px) {
    .wrap {
        transform: scale(0.9);
        transform-origin: top center;
    }
}
</style>
</head>

<body>
<div class="wrap">

    <h1>ğŸ° C9 1íšŒì°¨ ë‚­í”Œë‹¨</h1>

    <div class="table-scroll">
        <div class="table" id="table">

            <!-- í—¤ë” -->
            <div class="row header">
                <div class="cell">ì•„ì´ë””</div>
                <div class="cell">ë‹‰ë„¤ì„</div>
                <div class="cell">ê°¯ìˆ˜</div>
                <div class="cell">ì›í”Œì›</div>
                <div class="cell">ê³µì•½</div>
                <div class="cell">ì—­íŒ¬</div>
                <div class="cell">ë¹„ê³ </div>
            </div>

            <!-- ìƒ˜í”Œ ë°ì´í„° 1ì¤„ (ë³µì‚¬í•´ì„œ ì‚¬ìš©í•˜ë©´ ë¨) -->
            <div class="row data-row">
                <div class="cell" contenteditable="true">danggun</div>
                <div class="cell" contenteditable="true">ë‹¹êµ°</div>
                <div class="cell amount-cell" contenteditable="true">30000</div>
                <div class="cell" contenteditable="true">1</div>
                <div class="cell" contenteditable="true">ì¶œì„</div>
                <div class="cell ygp-cell" contenteditable="true"></div>
                <div class="cell" contenteditable="true">VIP</div>
            </div>

        </div>
    </div>

</div>

<script>
/* ===========================
   1) ê°¯ìˆ˜ ê¸°ì¤€ ìƒ‰ìƒ + ì—­íŒ¬ 3% ê³„ì‚°
   =========================== */
function applyRowStyle(row) {
    const amountCell = row.querySelector(".amount-cell");
    const ygpCell    = row.querySelector(".ygp-cell");
    if (!amountCell || !ygpCell) return;

    const num = parseInt(amountCell.innerText.replace(/[^0-9]/g, ""), 10) || 0;

    // ì—­íŒ¬ = 3% (ë°˜ì˜¬ë¦¼)
    ygpCell.innerText = num > 0 ? Math.round(num * 0.03) : "";

    let levelVar = "--lv0";
    if (num >= 100 && num <= 298)          levelVar = "--lv1";
    else if (num >= 299 && num <= 999)     levelVar = "--lv2";
    else if (num >= 1000 && num <= 2999)   levelVar = "--lv3";
    else if (num >= 3000 && num <= 4999)   levelVar = "--lv4";
    else if (num >= 5000 && num <= 9999)   levelVar = "--lv5";
    else if (num >= 10000 && num <= 49999) levelVar = "--lv6";
    else if (num >= 50000 && num <= 99999) levelVar = "--lv7";
    else if (num >= 100000 && num <= 299999) levelVar = "--lv8";
    else if (num >= 300000)                levelVar = "--lv9";

    row.style.background = `var(${levelVar})`;
}

/* ëª¨ë“  ë°ì´í„° í–‰ì— ìŠ¤íƒ€ì¼ ì ìš© */
function refreshAllRows() {
    document.querySelectorAll(".row.data-row").forEach(applyRowStyle);
}

/* ì…ë ¥í•  ë•Œë§ˆë‹¤ í•´ë‹¹ í–‰ë§Œ ë‹¤ì‹œ ê³„ì‚° */
document.getElementById("table").addEventListener("input", (e) => {
    const row = e.target.closest(".row.data-row");
    if (row) applyRowStyle(row);
});

/* ===========================
   2) ë°°ê²½ í´ë¦­ ì‹œ í‚¤ë³´ë“œ ë‹«ê¸°
   =========================== */
document.addEventListener("click", (e) => {
    const isCell = e.target.closest(".cell");
    if (!isCell) {
        const active = document.activeElement;
        if (active && active.classList.contains("cell")) {
            active.blur();
        }
    }
});

/* ì´ˆê¸° í•œ ë²ˆ ì ìš© */
refreshAllRows();
</script>

</body>
</html>
